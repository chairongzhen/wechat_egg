/**
 * H5 sideslip components
 * time : 08-01-25
 * author : GuanQun
 * QQ-study-group:595377655 
 */
!function(){var a=!1,b=!0,c=!1,d=!0,e=!1,f={touch:function(d){var i,j,k,e=null,g=null,h=d.currentTarget.childNodes;for(i=0;i<h.length;i+=1)j=h[i],"DIV"==j.nodeName&&(j.getAttribute("class").match("sideslipBody")?e=j:j.getAttribute("class").match("sideslipTitle")&&(g=j));switch(k=g.children,d.type){case"touchstart":time=setTimeout(function(){e.style.backgroundColor="rgba(230,230,230,1)"},200),f.closeMenu(d),e.style.transitionDuration="0.2s",marginRight=window.getComputedStyle(e,"").transform,marginRight=Math.abs(Number(marginRight.substring(7,marginRight.length-1).split(",")[4])),$startX=d.touches[0].clientX,$startY=d.touches[0].clientY,touchesX=0,touchesY=0;break;case"touchmove":for(f.closeMenu(d),e.style.backgroundColor="white",subWidth=0,i=0;i<k.length;i+=1)subWidth+=k[i].clientWidth;if(e.style.transitionDuration="0s",$moveX=d.touches[0].clientX,$moveY=d.touches[0].clientY,touchesX=$startX-$moveX,touchesY=$startY-$moveY,!b||a)return!1;if(c)d.preventDefault();else if(touchesX<Math.abs(touchesY))return!1;c=!0,"none"==window.getComputedStyle(g).display&&(g.style.display="block"),e.style.transform=marginRight>=0?0>marginRight+touchesX?"translate3d(0px,0px, 0px)":500>=marginRight+touchesX?"translate3d(-"+(marginRight+touchesX)+"px,0px, 0px)":"translate3d(-"+subWidth+"px,0px, 0px)":"translate3d(0px,0px, 0px)";break;case"touchend":clearTimeout(time),e.style.backgroundColor="white",e.style.transitionDuration="0.2s",marginRight=window.getComputedStyle(e,"").transform,marginRight=Math.abs(Number(marginRight.substring(7,marginRight.length-1).split(",")[4])),58>=marginRight||-58>=touchesX?("none"!=window.getComputedStyle(g).display&&setTimeout(function(){g.style.display="none"},220),e.style.transform="translate3d(0px,0px, 0px)"):e.style.transform="translate3d(-"+subWidth+"px,0px, 0px)",c=!1,a=!1;break;case"ontouchcancel":c=!1,a=!1}},closeMenu:function(a){var d,e,b=document.getElementsByClassName("sideslipBody"),c=0;for(d=0;d<b.length;d+=1)e=window.getComputedStyle(b[d]).transform,e=Math.abs(Number(e.substring(7,e.length-1).split(",")[4])),e>0&&a.currentTarget.querySelector(".sideslipBody")!=b[d]&&(b[d].style.transform="translate3d(0px,0px, 0px)",c=d,setTimeout(function(){"DIV"==b[c].nextSibling.nodeName?b[c].nextSibling.style.display="none":b[c].nextSibling.nextSibling.style.display="none"},220))},restoreEvent:function(a){switch(a.type){case"touchstart":$startY=a.touches[0].clientY;break;case"touchmove":if($moveY=a.touches[0].clientY,touchesY=$startY-$moveY,d)if(0>touchesY)a.preventDefault();else{var b=document.getElementById("scrollWrap");b.scrollHeight==b.clientHeight?a.preventDefault():a.stopPropagation()}else e&&(touchesY>0?a.preventDefault():a.stopPropagation());break;case"touchend":}},scrollEvent:function(){var f=document.getElementById("scrollWrap"),g=f.scrollHeight,h=f.scrollTop;viewHeight=f.clientHeight,d=0==h?!0:!1,e=1==h/(g-viewHeight)?!0:!1,c||(a=!0),setTimeout(function(){a=!1},500)},sideslipInsert:function(a){var b=a.target.classList.contains("list");b&&(a.target.addEventListener("touchstart",f.touch,!1),a.target.addEventListener("touchmove",f.touch,!1),a.target.addEventListener("touchend",f.touch,!1),f.scrollEvent())},resize:function(){f.scrollEvent()}};document.addEventListener("DOMContentLoaded",function(){var b,a=document.getElementsByClassName("list");for(b=0;b<a.length;b+=1)a[b].addEventListener("touchstart",f.touch,!1),a[b].addEventListener("touchmove",f.touch,!1),a[b].addEventListener("touchend",f.touch,!1);document.getElementById("scrollWrap").addEventListener("DOMNodeInserted",f.sideslipInsert),document.getElementById("scrollWrap").addEventListener("touchstart",f.restoreEvent),document.getElementById("scrollWrap").addEventListener("touchmove",f.restoreEvent),document.getElementById("scrollWrap").addEventListener("touchend",f.restoreEvent),document.getElementById("scrollWrap").addEventListener("scroll",f.scrollEvent),window.addEventListener("resize",f.resize)})}();